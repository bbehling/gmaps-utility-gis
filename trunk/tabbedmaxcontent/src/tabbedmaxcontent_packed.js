(function(){var j={tabBar:{background:'#F4F4F4 none repeat scroll 0 0',borderBottom:'1px solid #B0B0B0',padding:'6px 8px 4px',marginRight:'13px',whiteSpace:'nowrap',verticalAlign:'bottom'},tabLeft:{},tabRight:{},tabOn:{background:'#FFFFFF none repeat scroll 0 0',padding:'6px 8px 4px',borderTop:'1px solid #B0B0B0',borderLeft:'1px solid #B0B0B0',borderRight:'1px solid #B0B0B0',borderBottom:'2px solid #FFFFFF',color:'#000000',textDecoration:'none',fontWeight:'bold'},tabOff:{background:'#F4F4F4 none repeat scroll 0 0',padding:'6px 8px 4px',color:'#0000FF',border:'none',textDecoration:'underline',fontWeight:'normal'},content:{borderStyle:'none solid solid solid',borderWidth:'1px',borderColor:'#B0B0B0',borderTop:'none',overflow:'auto'},summary:{overflow:'auto',marginBottom:'5px'}};var l=function(a,b){if(a&&b){for(var x in b){if(b.hasOwnProperty(x)){if(a[x]&&typeof b[x]==='object'){a[x]=l(a[x],b[x])}else{a[x]=b[x]}}}}return a};var k=function(f,e,a,c,d){var b=a;if(!a||(a&&typeof a==='string')){b=document.createElement(f);b.innerHTML=a||''}if(c){l(b.style,c)}if(e){l(b,e)}if(d){d.appendChild(b)}return b};var h=function(a,b){var d=0;var e=0;var c=a;while(c&&c!==b){d+=c.offsetLeft;e+=c.offsetTop;c=c.offsetParent}return{left:d,top:e}};function TabbedMaxContent(a){this.infoWindow_=a;GEvent.bind(a,'maximizeclick',this,this.setupTabs_);GEvent.bind(a,'restoreclick',this,this.clearTabs_);GEvent.bind(a,'maximizeend',this,this.checkResize);this.style_={};this.maxNode_=null;this.summaryNode_=null;this.contentsNode_=null;this.navNodes_=[];this.contentNodes_=[]}TabbedMaxContent.prototype.initialize_=function(a,c,e){this.clearTabs_();this.navNodes_=[];this.contentNodes_=[];if(this.maxNode_){this.maxNode_.innerHTML=''}this.maxNode_=k('div',{id:'maxcontent'});e=e||{};var d=e.selectedTab||0;this.style_=l({},j);this.style_=l(this.style_,e.style);this.summaryNode_=k('div',null,a,this.style_.summary,this.maxNode_);var b=k('div',null,null,this.style_.tabBar,this.maxNode_);this.contentsNode_=k('div',null,null,null,this.maxNode_);if(c&&c.length){k('span',null,null,this.style_.tabLeft,b);for(var i=0,ct=c.length;i<ct;i++){if(i===d||c[i].name===d){this.selectedTab_=i}this.navNodes_.push(k('span',null,c[i].name,this.style_.tabOff,b));var f=k('div',null,c[i].contentElem,this.style_.content,this.contentsNode_);f.style.display='none';f.name=c[i].name;this.contentNodes_.push(f)}k('span',null,null,this.style_.tabRight,b)}};TabbedMaxContent.prototype.selectTab=function(t){for(var i=0,ct=this.navNodes_.length;i<ct;i++){if(i===t||this.contentNodes_[i].name===t){l(this.navNodes_[i].style,this.style_.tabOn);this.contentNodes_[i].style.display='block';this.selectedTab_=i;GEvent.trigger(this,'selecttab',this.contentNodes_[i].name,this.contentNodes_[i])}else{l(this.navNodes_[i].style,this.style_.tabOff);this.contentNodes_[i].style.display='none'}}};TabbedMaxContent.prototype.getTabContainer=function(t){for(var i=0,ct=this.contentNodes_.length;i<ct;i++){if(i===t||this.contentNodes_[i].name===t){return this.contentNodes_[i]}}};TabbedMaxContent.prototype.checkResize=function(){var e=this.infoWindow_.getContentContainers()[0];var c=this.contentsNode_;var d=this.summaryNode_;var b=this.contentNodes_;setTimeout(function(){var a=h(c,e);for(var i=0,ct=b.length;i<ct;i++){b[i].style.width=e.style.width;b[i].style.height=(parseInt(e.style.height,10)-a.top)+'px'}},0)};TabbedMaxContent.prototype.setupTabs_=function(){for(var i=0,ct=this.navNodes_.length;i<ct;i++){if(i===this.selectedTab_&&this.contentNodes_[i].style.display==='none'){this.selectTab(this.selectedTab_)}GEvent.addDomListener(this.navNodes_[i],'click',GEvent.callback(this,this.selectTab,i))}};TabbedMaxContent.prototype.clearTabs_=function(){if(this.maxNode_){GEvent.clearNode(this.maxNode_)}};GMap2.prototype.openInfoWindowMaxTabs=function(a,c,b,e,f){var g=this.getInfoWindowMaxContent();var d=f||{};g.initialize_(b,e,d);d.maxContent=g.maxNode_;if(d.style){delete d.style}if(d.selectedTab){delete d.selectedTab}this.openInfoWindow(a,c,d)};GMap2.prototype.openInfoWindowMaxTabsHtml=function(a,b,d,c,e){this.openInfoWindowMaxTabs(a,k('div',null,b),k('div',null,d),c,e)};GMap2.prototype.getInfoWindowMaxContent=function(){var a=this.getInfoWindow();if(!a.maxContent_){a.maxContent_=new TabbedMaxContent(a)}return a.maxContent_};GMarker.prototype.openInfoWindowMaxTabsHtml=function(a,b,d,c,e){a.openInfoWindowMaxTabsHtml(this.getLatLng(),b,d,c,e)};GMarker.prototype.openInfoWindowMaxTabs=function(c,b,a,d,e){c.openInfoWindowMaxTabs(this.getLatLng(),b,a,d,e)}})();