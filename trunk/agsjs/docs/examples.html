<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
        <title>Custom Widget for ArcGIS JavaScript API: Examples</title>
        <link rel="stylesheet" type="text/css" href="http://code.google.com/css/codesite.css"/>
        <link rel="stylesheet" type="text/css" href="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/util/docs/template/local_extensions.css"/>
        <script type="text/javascript" src="http://code.google.com/js/prettify.js">
        </script>
    </head>
    <body onload="prettyPrint()">
        <div>
            <a name="Top"></a>
            <h1><a></a>Custom Widgets for ArcGIS JavaScript API: Examples</h1>
            <p>
                <b><a href="reference.html">Class References</a></b>
            </p>
        </div>
        <div>
            <h2><a name="About"></a>About</h2>
            <p>
                This library has a few widgets for ArcGIS Server JavaScript API, including a <a href="#TOC">Table of Contents (TOC)/Legend combo</a>, <a href="#GMaps">Google Maps Layer</a>.
            </p>
        </div>
        <div>
            <h2><a name="HowTo"></a>Include Scripts</h2>
            <p>
            The widget uses 
            <code>
                agsjs
            </code>
            as namespace. 
            </code>Put the downloaded 
            <code>
                agsjs
            </code>
            folder under your application. 
            underneath the agsjs folder, should have files named *.js and a sub folder css with file *.css. as in <img src="files.png"/>In your HTML page, inside the section to define djConfig: (make sure the path to folder agsjs is correct)<pre class="prettyprint">
              djConfig = {
              parseOnLoad: true,
              baseUrl: './', 
              modulePaths: {
                'agsjs': '../path/to/agsjs'
              }
            };</pre>
        </p>
        <p>
            Then in the require section, add 
            <code>
                dojo.require("agsjs.TOC");
            </code>
            <pre class="prettyprint">
             ...
            dojo.require("esri.map");
            ...
            dojo.require("agsjs.TOC");
              </pre>
        </p>
        </div>
        <div>
          <h2><a name="TOC"></a>Table of Contents (TOC)/Legend</h2>
        <p>
            The widget provides a tree-like structure for layer list and legend combination. It provides 2 styles by setting the "
            <code>
                style
            </code>" value in constructor parameter:
            <table>
                <tr>
                    <td>
                        standard
                    </td>
                    <td>
                        It's similar to ArcMap's Table of Content. Legends are nested underneath layer name. 
                        Click +/- icon to expand the legend or layer group. Click check box to turn on/off layers (dynamic layer only, tiled service will not display checkbox) 
                        <br>
                        <img src="standard.png"/>
                    </td>
                </tr>
                <tr>
                    <td>
                        inline
                    </td>
                    <td>
                        It's similar to Google Earth's "Layers" component. When possible, the legend icon is placed in front of layer name, instead of nested below. 
                        It uses checkboxes in addition to +- button to toggle nested legends. When check on a layer, legend is expanded automatically, and vise versa.
                        <br>
                        <img src="inline.png"/>
                    </td>
                </tr>
            </table>
        </p>
        <p>
            More features:
            <ul>
                <li>
                    scale threshold: It respects the scale threshold of layers, if a layer is out of scale, it will be displayed differently and check box will be disabled. 
                    or you can hide it completely by add css class 
                    <code>
                        agsTOCOutScale
                    </code>
                    and set 
                    <code>
                        {display: none}
                    </code>
                </li>
                <li>
                    transparency slider: It can optionally have a slider for each map service, to adjust transparency.
                </li>
                <li>
                    default expansion: If a layer is visible, it's legend will be expanded by default, otherwise collapsed.
                </li>
            </ul>
        </p>
        <p>
            The library has a default css style sheet, but the following CSS class can be overriden for additional style needs: <pre><code>
                    .agsTOCNode,
                    .agsTOCContent,
                    .agsTOCOutScale,
                    .agsTOCService,
                    .agsTOCServiceLabel,
                    .agsTOCGroup,
                    .agsTOCGroupLabel,
                    .agsTOCLayerLabel,
                    .agsTOCLegendLabel
                </code></pre>
        </p>
        <p>
            After the script is loaded, in the initilization code, <pre class="prettyprint">
           dojo.connect(map, 'onLayersAddResult', function(results) {
                var inlineTOC = new agsjs.TOC({
                  map: map,
                  layerInfos: [{layer:dynaLayer: title:"Dyna"}],
                  style: 'inline',// or 'standard'
                  slider: true
                }, 'inlineDiv');
                inlineTOC.startup();
            ..
            }
        </pre>
        </p>
        <p>
            <a href="../examples/toc.html">View example </a> | <a href="#Top"> back to Top </a>. 
        </p>
    </div>
    <div>
             <h2><a name="GMaps"></a>Google Maps Layer</h2>
             <p>
                This component lets you add google maps as a layer in ArcGIS Server JavaScript API. It uses Google API to access tiles, thus it conforms to API terms of use.
                However, if apps are to deployed in Intranet, a Google Maps Premium license is still needed, which is separate from API TOU.
            </p>
            <p>
                The typical use is adding Google Maps as reference layer in an application that built on top of ArcGIS Server JavaScript API and dojo framework. 
                In some cases, Google provides more up-to-date aerial images, and also labels local business, which is not readily available from other resoures.
            </p>
            <p>
                Please note, there is NO need to load Google API in the header. The Google API will be loaded dynamically when 
                the first Google Map is set to visible. This approach will save API load count 
                for Google Maps Enterprise clients because you do not have to load the API unless you use it.
            </p>
            <p>
                After the script is loaded <a href="#HowTo">(Click to see how)</a>, you can simply treat Google Maps as other layer in 
                your application. 
            </p>
            <pre class="prettyprint">
         djConfig = {
              parseOnLoad: true,
              baseUrl: './', 
              modulePaths: {
                'agsjs': '../path/to/agsjs'
              }
       ...
       dojo.require('agsjs.layers.GoogleMapsLayer');
       ...
       map = new esri.Map("map", {
         extent: initExtent,
         logo: false
       });
       ... 
       var gMapLayer = new agsjs.layers.GoogleMapsLayer({id:&#39;googlemaps&#39;});
       map.addLayer(gMapLayer);
        </pre>
            <p>
                That&#39;s it! You should only need one instance of the layer, then use 
                <code>
                    setMapTypeId(mapTypeId)
                </code>
                to switch between Google Street Map, Satellite, Hybrid and Terrain.
            </p>
            <p>
                <a href="../examples/gmapslayer.html">View example </a> | <a href="#Top"> back to Top </a>.  
            </p>
        </div>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <script type="text/javascript">
        
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-3946449-12']);
        _gaq.push(['_trackPageview']);
        
        (function() {
          var ga = document.createElement('script');
          ga.type = 'text/javascript';
          ga.async = true;
          ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0];
          s.parentNode.insertBefore(ga, s);
        })();
    </script>
    </body>
</html>
