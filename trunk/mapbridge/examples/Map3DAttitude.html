<!DOCTYPE html "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
        <script type="text/javascript" src="../src/mapbridge.js?key=ABQIAAAAjU0EJWnWPMv7oQ-jjS7dYxSPW5CJgpdgO_s4yyMovOaVh_KvvhSfpvagV18eOyDWu7VytS6Bi1CWxw">
        </script>
        <script type="text/javascript">
            var map;
            function init() {
              MapBridge.createMap(document.getElementById('map_canvas'), function(mp, brg) {
                map = mp;
                map.addEventListener('mapevent_mappreinitialize', onMapPreinitialize);
                map.addEventListener('mapevent_mapready', onMapReady);
              });
            }
            
            function onMapPreinitialize(e) {
              var myMapOptions = new MapOptions({
                zoom: 12,
                center: new LatLng(40.756054, -73.986951),
                mapType: MapType.S('PHYSICAL_MAP_TYPE'),
                viewMode: View.S('VIEWMODE_PERSPECTIVE'),
                attitude: new Attitude(0, 0, 0)
              });
              map.setInitOptions(myMapOptions);
            }
            
            function onMapReady(e) {
              map.addControl(new NavigationControl());
            }
            
            function changeYaw() {
              var yaw = parseFloat(document.getElementById('yaw').value);
              map.setAttitude(new Attitude(yaw, map.getAttitude().getPitch(), 0));
            }
            
            function changePitch() {
              var pitch = parseFloat(document.getElementById('pitch').value);
              map.setAttitude(new Attitude(map.getAttitude().getYaw(), pitch, 0));
            }
        </script>
    </head>
    <body onload="init()">
        <div>
            Yaw (0-360):<input id="yaw" type="text" value="20" /><input type="button" onclick="changeYaw()" value="Set Yaw"/>
            Pitch (0-85):<input id="pitch" type="text" value="30" /><input type="button" onclick="changePitch()" value="Set Pitch"/>
        </div>
        <div id="map_canvas" style="width:100%;height:90%">
        </div>
    </body>
</html>
