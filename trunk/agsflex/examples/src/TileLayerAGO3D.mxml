<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml"  xmlns:maps="com.google.maps.*"
                layout="absolute">
    <maps:Map3D id="map"
                sensor="false"
                mapevent_mapready="onMapReady(event)"
                mapevent_mappreinitialize="onMapPreinitialize(event);"
                width="100%"
                height="100%"
                key="ABQIAAAA7QUChpcnvnmXxsjC7s1fCxQGj0PqsCtxKvarsoS-iqLdqZSKfxTd7Xf-2rEc_PC9o8IsJde80Wnj4g"/>
  <mx:Script>
    <![CDATA[
      import com.google.maps.*;
      import com.google.maps.geom.*;
      import com.google.maps.controls.*;
      import com.google.maps.overlays.*;
      import com.google.maps.interfaces.*;

      import ags.*; 
      private function onMapPreinitialize(event:MapEvent):void {
        map.setInitOptions(new MapOptions({viewMode: View.VIEWMODE_PERSPECTIVE, attitude: new Attitude(20, 30, 0)}));
      }

      private function onMapReady(event:Event):void {
        map.enableScrollWheelZoom();
        map.addControl(new MapTypeControl());
        map.addControl(new NavigationControl());
        map.setCenter(new LatLng(45.5, -122.7), 15);
        var url:String='http://sampleserver1.arcgisonline.com/ArcGIS/rest/services/Portland/Portland_ESRI_LandBase_AGO/MapServer';
        var agsTile:ArcGISTileLayer = new ArcGISTileLayer(url);
        agsTile.addEventListener(ServiceEvent.LOAD, function(evt:Event):void {
           var agsType:ArcGISMapType=new ArcGISMapType([agsTile]);
           map.addMapType(agsType);
           map.setMapType(agsType);
        });
      }
    ]]>
  </mx:Script>
</mx:Application>
